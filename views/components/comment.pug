include icon.pug
include link.pug
include button.pug

mixin Comment(commentData)
  -const calculateTime = (created) => {
  -  return `on ${created[8]}${created[9]}-${created[5]}${created[6]}-${created[2]}${created[3]} at ${created[11]}${created[12]}:${created[14]}${created[15]}`;
  -}
  div.comment-container
    div.comment-content

      div.comment-votes
        +Icon("/static/assets/icons/up.svg", "upvote comment", `commentUpdateVoteState(1, '${commentData.ref}')`)
        p.comment-votes-amount(style=`color: ${commentData.voted}`) #{commentData.votes} | #{commentData.voted}
        +Icon("/static/assets/icons/down.svg", "downvote comment", `commentUpdateVoteState(-1, '${commentData.ref}')`)

      div.comment-main
        div.comment-info
          +Icon("/static/assets/icons/minus.svg", "min/max comment", "commentCollapse()", "width: 16px; height: 16px; margin-right: 6px;") 
          div.comment-info-text-container
            +Link("/hey")
              p.comment-info-text-goto= commentData.owner
            p.comment-info-text &nbsp;replied #{calculateTime(commentData.created)}

        div.comment-text-container
          p.comment-text= commentData.content

        div.comment-info-actions-container
          +Icon("/static/assets/icons/star.svg", "comments", null, "width: 16px; height: 16px", false)
          p.comment-info-text-actions(saved="false", onclick="commentUpdateSaveState()") save&nbsp;

          +Icon("/static/assets/icons/flag.svg", "comments", null, "width: 16px; height: 16px", false)
          p.comment-info-text-actions(onclick="commentReport()") report&nbsp;

          +Icon("/static/assets/icons/reply.svg", "comments", null, "width: 16px; height: 16px", false)
          p.comment-info-text-actions(onclick="commentMinMax()") reply&nbsp;

        div.comment-reply
          textarea.comment-textarea(rows="6" cols="64" placeholder="Type your reply here...")
          div.comment-textarea-buttons-container
            +Button("Reply", `commentReply('${commentData.refPost}', '${commentData.ref}')`)
            +Button("Cancel", "commentMinMax()")

    if commentData.children
      each child in commentData.children
        +Comment(child)