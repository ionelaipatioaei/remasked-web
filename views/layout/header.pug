include ../components/link.pug
include ../components/icon.pug

mixin Header(logged, newMessages, newNotifications, displayCommunity)
  nav
    div.nav-container
      div(style="display: flex; align-items: center;")
        +Link("/", null,  "display: flex;")
          img(src="/static/assets/logo_small.png", alt="logo", style="height: 32px; width: 32px; margin: 8px;")
        if displayCommunity
          +Link(`/c/${displayCommunity}`, null,  "display: flex;")
            p(style="font-size: 1.1em;") /c/#{displayCommunity}

      ul.nav-items
        if logged
          li.nav-item
            +Link("/profile")
              +Icon("/static/assets/icons/user.svg", "profile", null, "margin-left: 8px")

          li.nav-item
            +Link("/communities")
              +Icon("/static/assets/icons/list.svg", "communities", null, "margin-left: 8px")

          li.nav-item
            +Link("#")
              +Icon("/static/assets/icons/bell.svg", "notifications", null, "margin-left: 8px; cursor: not-allowed;", false)
              
          li.nav-item
            +Link("#")
              +Icon("/static/assets/icons/mail.svg", "messages", null, "margin-left: 8px; cursor: not-allowed;", false)

        li.nav-item
          //- whatever if this link is present the style is ok if not you see the icon lower
          +Link("")
            +Icon("/static/assets/icons/random.svg", "random", "getRandomCommunity()", "margin-left: 8px")

        //- GOOD SYSTEM!
        //- li.nav-item(style=`margin-left: ${newMessages ? "-16px" : 0}`)
        //-   if newMessages
        //-     div.nav-new-container
        //-       div.nav-new-text= newMessages
        //-   +Link("/messages")
        //-     +Icon("/static/assets/icons/mail.svg", "messages", null, "margin-left: 8px")

        //- li.nav-item(style=`margin-left: ${newNotifications ? "-16px" : 0}`)
        //-   if newNotifications
        //-     div.nav-new-container
        //-         div.nav-new-text= newNotifications
        //-   +Link("/notifications")
        //-     +Icon("/static/assets/icons/bell.svg", "notifications", null, "margin-left: 8px")

        li.nav-item
          +Link("/settings")
            +Icon("/static/assets/icons/settings.svg", "settings", null, "margin-left: 8px")

        li.nav-item
          +Link(logged ? "/logout" : "/login")
            +Icon(logged ? "/static/assets/icons/log-out.svg" : "/static/assets/icons/log-in.svg", "logout", "authLogout()", "margin-left: 8px")