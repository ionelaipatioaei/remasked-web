"use strict";// auth functions
var authLogin=function(){var a=document.querySelector("#username").value,b=document.querySelector("#password").value;fetch("/api/auth/login",{method:"POST",body:JSON.stringify({username:a,password:b})}).then(function(a){return a.json()}).then(function(a){console.log(a),a.error?document.querySelector("#password").value="":a.success&&(window.location.href="/")}).catch(function(a){return console.log(a)})},authRegister=function(){var a=document.querySelector("#username").value,b=document.querySelector("#email").value,c=document.querySelector("#password").value,d=document.querySelector("#confirm-password").value;fetch("/api/auth/register",{method:"POST",body:JSON.stringify({username:a,email:""===b?null:b,password:c,confirmPassword:d})}).then(function(a){return a.json()}).then(function(a){console.log(a),a.success&&(window.location.href="/login")}).catch(function(a){return console.log(a)})},authLogout=function(){fetch("/api/auth/logout",{method:"POST",credentials:"include"}).then(function(a){return a.json()}).then(function(a){return console.log(a)}).catch(function(a){return console.log(a)})};
"use strict";// comment functions
var commentMinMax=function(){var a=event.currentTarget.parentNode.parentNode.parentNode,b=a.querySelector(".comment-reply");if("none"===b.style.display||!b.style.display)b.style.display="block",b.querySelector(".comment-textarea").focus(),a.querySelector(".comment-votes").style.margin="0 0 auto -24px";else{var c=event.currentTarget.parentNode.parentNode.parentNode.parentNode;c.querySelector(".comment-votes").style.margin="0 0 0 -24px",b.style.display="none"}},commentCollapse=function(){var a=event.currentTarget.parentNode.parentNode.parentNode.parentNode,b=a.querySelector(".comment-info-text-container"),c=a.querySelector(".comment-text-container"),d=a.querySelector(".comment-info-actions-container"),e=a.querySelector(".comment-votes"),f=a.querySelectorAll(".comment-container"),g=a.querySelector(".comment-reply");if("unset"===b.style.fontStyle||!b.style.fontStyle){event.currentTarget.src="/static/assets/icons/plus.svg",b.style.fontStyle="italic",c.style.display="none",d.style.display="none",e.style.display="none",g.style.display="none";for(var h=0;h<f.length;h++)f[h].style.display="none"}else{event.currentTarget.src="/static/assets/icons/minus.svg",b.style.fontStyle="unset",c.style.display="block",d.style.display="flex",e.style.display="flex";for(var i=0;i<f.length;i++)f[i].style.display="block"}},commentReply=function(a,b){console.log(a,b);var c=event.currentTarget.parentNode.parentNode.querySelector("textarea");fetch("http://localhost:8081/api/comment",{method:"POST",body:JSON.stringify({refPost:a,refComment:b,content:c.value})}).then(function(a){return a.json()}).then(function(a){return console.log(a)}).catch(function(a){return console.log(a)});var d=event.currentTarget.parentNode.parentNode.parentNode.parentNode;d.insertAdjacentHTML("afterend",createCommentText(c.value)),c.value="";var e=d.querySelector(".comment-reply");e.style.display="none",d.querySelector(".comment-votes").style.margin="0 0 0 -24px"},commentUpdateSaveState=function(){var a=event.currentTarget,b=a.parentNode.querySelector("img");"true"===a.saved?(b.src="/static/assets/icons/star.svg",a.saved="false",a.innerHTML="save"):(b.src="/static/assets/icons/starFill.svg",a.saved="true",a.innerHTML="unsave")},commentUpdateVoteState=function(a,b){var c=event.currentTarget.parentNode.querySelector(".comment-votes-amount");console.log(a,b),fetch("http://localhost:8081/api/vote",{method:"POST",body:JSON.stringify({refComment:b,vote:a})}).then(function(a){return a.json()}).then(function(b){c.innerHTML=b.remove?parseInt(c.innerHTML)-a:parseInt(c.innerHTML)+a,console.log(b)}).catch(function(a){return console.log(a)})},commentReport=function(){console.log("haha")},createCommentText=function(a){function b(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}for(var c=function(a){var b=/(https?:\/\/[^\s]+)/g;return a.replace(b,function(a){return"<a target=\"_blank\" href=\""+a+"\">"+a+"</a>"})},d=a,e="<p class='comment-text'>",f=0;f<d.length;f++)"\n"==d[f]&&"\n"==d[f+1]?(e+="</p><p class='comment-text'>",f+=1):e+="\n"==d[f]?"<br/>":b(d[f]);return"\n    <div class=\"comment-container\">\n      <div class=\"comment-content\">\n        <div class=\"comment-main\">\n          <div class=\"comment-info\">\n            <p class=\"comment-info-text\" style=\"font-style: italic\">You replied:</p>\n          </div>\n          <div class=\"comment-text-container\">\n            ".concat(c(e),"\n          </div>\n        </div>\n      </div>\n    </div>\n  ")},commentReplyMain=function(a){var b=event.currentTarget.parentNode.parentNode.querySelector("textarea");fetch("http://localhost:8081/api/comment",{method:"POST",body:JSON.stringify({refPost:a,refComment:null,content:b.value})}).then(function(a){return a.json()}).then(function(a){return console.log(a)}).catch(function(a){return console.log(a)});var c=document.querySelector(".reply-container");c.insertAdjacentHTML("afterend",createCommentText(b.value)),b.value=""};
"use strict";// post functions
var postMinMax=function(){var a=event.currentTarget.parentNode.parentNode.parentNode,b=a.querySelector(".post-small-preview"),c=a.querySelector(".post-large-preview");"flex"!==b.style.display&&b.style.display?(c.style.display="none",b.style.display="flex",a.querySelector(".post-votes").style.margin="0",event.currentTarget.src="/static/assets/icons/maximize.svg"):(c.style.display="block",b.style.display="none",a.querySelector(".post-votes").style.margin="0 0 auto",event.currentTarget.src="/static/assets/icons/minimize.svg")},postUpdateVoteState=function(a,b){// stupid way to do things!
var c=event.currentTarget.parentNode.querySelector(".post-votes-amount");"up"===a&&0===parseInt(b)?c.innerHTML=parseInt(c.innerHTML)+1:"down"===a&&0===parseInt(b)?c.innerHTML=parseInt(c.innerHTML)-1:"up"===a&&-1===parseInt(b)?c.innerHTML=parseInt(c.innerHTML)+2:"down"==a&&1===parseInt(b)&&(c.innerHTML=parseInt(c.innerHTML)-2)},postUpdateSaveState=function(){var a=event.currentTarget;"true"===a.saved?(a.src="/static/assets/icons/star.svg",a.saved="false"):(a.src="/static/assets/icons/starFill.svg",a.saved="true")},postHide=function(){var a=event.currentTarget.parentNode.parentNode.parentNode.parentNode;a.style.display="none",console.log(a)};
